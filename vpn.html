<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./tailwindcss.js"></script>
    <link rel="icon" type="image/x-icon" href="images/default.png" />
    <title>
      大翻墙运动 信息倒灌行动 推墙运动 墙倒众人推 拆墙运动 普及翻墙
      完全免费翻墙软件
    </title>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="大翻墙运动 信息倒灌行动 推墙运动 墙倒众人推 拆除互联网防火墙 拆墙运动 声援乔鑫鑫 杨泽伟 编程随想 阮晓寰 "
    />
    <meta
      name="keywords"
      content="大翻墙运动 信息倒灌行动 推墙运动 墙倒众人推 完全免费翻墙软件 梯子 机场 拆墙机场 回国机场 回国梯子 代理 Vmess Shadowsocks Trojan v2ray v2board Shadowrocket GFW 突破防火墙 VPN 防火墙 拆墙运动 拆墙 推墙 fanqiang 科学上网 自由上网 免费科学上网 免费翻墙 油管youtube 电脑、手机、iOS、安卓、windows、Mac、Linux 推特"
    />

    <script>
      fetch('header.html')
        .then((response) => response.text())
        .then((text) => {
          document.getElementById('header').innerHTML = text;

          const mobileHeader = document.getElementById('mobile-header');
          const closeMenu = document.getElementById('close-menu');
          const openMenu = document.getElementById('open-menu');

          mobileHeader.classList.add('hidden');

          closeMenu.onclick = () => {
            mobileHeader.classList.add('hidden');
          };

          openMenu.onclick = () => {
            mobileHeader.classList.remove('hidden');
          };
        });

      fetch('footer.html')
        .then((response) => response.text())
        .then((text) => {
          document.getElementById('footer').innerHTML = text;

          const currentYearSpan = document.getElementById('currentYear');
          const currentDate = new Date();
          const currentYear = currentDate.getFullYear();
          currentYearSpan.textContent = currentYear;
        });
    </script>
  </head>
  <body>
    <div id="header"></div>
    <main>
      <div class="mx-auto w-full flex items-center justify-center">
        <fieldset class="mt-20">
          <legend class="sr-only"></legend>
          <div class="grid grid-cols-3 gap-3 sm:grid-cols-5" id="os-group">
            <!-- Memory Options will be added here using JavaScript -->
          </div>
        </fieldset>
      </div>

      <h1
        class="mx-auto w-full flex items-center justify-center my-10 text-2xl font-bold leading-10 tracking-tight text-gray-900"
      >
        翻墙软件
      </h1>

      <ul
        role="list"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
        id="vpn-list"
      ></ul>

      <h1
        class="mx-auto w-full flex items-center justify-center my-10 text-2xl font-bold leading-10 tracking-tight text-gray-900"
      >
        无审查软件
      </h1>

      <ul
        role="list"
        class="grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4"
        id="e2e-list"
      ></ul>

      <!-- FAQs -->
    </main>

    <!-- <div id="footer"></div> -->

    <!-- Footer -->
    <div id="footer"></div>

    <script type="module">
      const osTypes = [
        {
          id: 'android',
          name: '安卓手机',
          icon: 'images/android.svg',
        },
        {
          id: 'windows',
          name: '微软电脑',
          icon: 'images/windows.svg',
        },
        {
          id: 'ios',
          name: '苹果手机',
          icon: 'images/ios.svg',
        },
        {
          id: 'mac',
          name: '苹果电脑',
          icon: 'images/mac.svg',
        },
        {
          id: 'linux',
          name: 'Linux电脑',
          icon: 'images/linux.svg',
        },
      ];

      async function getVPN() {
        const response = await fetch('/vpn-data');
        const vpn = await response.json();
        return vpn;
      }

      async function getE2E() {
        const response = await fetch('/ee-data');

        const e2e = await response.json();

        return e2e;
      }

      function classNames(...classes) {
        return classes.filter(Boolean).join(' ');
      }

      function addLiElement(activeVPN, vpnGroup) {
        activeVPN.map((item) => {
          const vpnLiElement = document.createElement('li');
          vpnLiElement.className =
            'col-span-1 flex flex-col divide-y divide-gray-200 rounded-lg bg-white text-center shadow';

          vpnLiElement.innerHTML = `<div class="flex flex-1 flex-col p-8">
          <img
            class="mx-auto h-32 w-32 flex-shrink-0 rounded-full"
            src="${item.image}"
            alt=""
          />
          <h3 class="mt-6 text-sm font-medium text-gray-900">${item.name}</h3>
          <dl class="mt-1 flex flex-grow flex-col justify-between">
            <dd class="text-sm text-gray-500">${item.comment}</dd>
                <dd class='mt-3'>
                  <a
                    href='${item.web}'
                    class='inline-flex items-center rounded-full bg-green-50 px-2 py-1 text-xs font-medium text-green-700 ring-1 ring-inset ring-green-600/20'
                  >
                    ${item.web ? '官网' : ''}
                  </a>
                </dd>
          </dl>
        </div>
        <div>
          <div class="-mt-px flex divide-x divide-gray-200">
            <div class="-ml-px flex w-0 flex-1">
              <a
                href="${item.link2}"
                class="relative inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-br-lg border border-transparent py-4 text-sm font-semibold text-gray-900"
              >

                Github HTTPS下载
              </a>
            </div>
            <div class="flex w-0 flex-1">
              <a
                href="${item.link1}"
                class="relative -mr-px inline-flex w-0 flex-1 items-center justify-center gap-x-3 rounded-bl-lg border border-transparent py-4 text-sm font-semibold text-gray-900"
              >

                免墙HTTP下载
              </a>
            </div>
            
          </div>
        </div>`;

          vpnGroup.appendChild(vpnLiElement);
        });
      }

      const radioGroup = document.getElementById('os-group');
      const vpnGroup = document.getElementById('vpn-list');
      const e2eGroup = document.getElementById('e2e-list');

      let vpn;
      let e2e;
      let activeVPN;
      let activeE2E;

      try {
        e2e = await getE2E();
      } catch (err) {
        console.log('load e2e json error', err);
      }

      try {
        vpn = await getVPN();
      } catch (err) {
        console.log('load vpn json error', err);
      }

      if (vpn) {
        activeVPN = vpn
          ?.filter((item) => item.os == 'android')
          ?.sort((a, b) => b.star - a.star);

        addLiElement(activeVPN, vpnGroup);
      }

      if (e2e) {
        activeE2E = e2e
          ?.filter((item) => item.os == 'android')
          ?.sort((a, b) => b.star - a.star);
        addLiElement(activeE2E, e2eGroup);
      }

      osTypes.forEach((option, i) => {
        const osGroupElement = document.createElement('div');

        osGroupElement.className = classNames(
          'cursor-pointer focus:outline-none',
          'flex items-center justify-center rounded-md py-3 px-3 text-sm font-semibold uppercase sm:flex-1'
        );

        osGroupElement.className +=
          i == 0
            ? ' selected bg-indigo-600 text-white hover:bg-indigo-500'
            : ' ring-1 ring-inset ring-gray-300 bg-white text-gray-900 hover:bg-gray-50';

        osGroupElement.innerHTML = `
          <p>
            <img src='${option.icon}' /> 
            <span>${option.name}</span>
          </p>
        `;

        osGroupElement.id = option.id;

        osGroupElement.onclick = () => {
          const selectedOption = radioGroup.querySelector('.selected');
          if (selectedOption) {
            selectedOption.classList.remove('selected');
            selectedOption.classList.remove('bg-indigo-600');
            selectedOption.classList.remove('text-white');
            selectedOption.classList.remove('hover:bg-indigo-500');

            selectedOption.classList.add('bg-white');
            selectedOption.classList.add('text-gray-900');
            selectedOption.classList.add('hover:bg-gray-50');
            selectedOption.classList.add('ring-1');
            selectedOption.classList.add('ring-inset');
            selectedOption.classList.add('ring-gray-300');
          }

          const activeVPN = vpn
            .filter((item) => item.os == osGroupElement.id)
            .sort((a, b) => b.star - a.star);

          const activeE2E = e2e
            .filter((item) => item.os == osGroupElement.id)
            .sort((a, b) => b.star - a.star);

          while (vpnGroup.firstChild) {
            vpnGroup.removeChild(vpnGroup.firstChild);
          }

          while (e2eGroup.firstChild) {
            e2eGroup.removeChild(e2eGroup.firstChild);
          }

          addLiElement(activeVPN, vpnGroup);

          addLiElement(activeE2E, e2eGroup);

          osGroupElement.classList.add('selected');
          osGroupElement.classList.add('bg-indigo-600');
          osGroupElement.classList.add('text-white');
          osGroupElement.classList.add('hover:bg-indigo-500');

          osGroupElement.classList.remove('bg-white');
          osGroupElement.classList.remove('text-gray-900');
          osGroupElement.classList.remove('hover:bg-gray-50');
        };

        radioGroup.appendChild(osGroupElement);
      });
    </script>
  </body>
</html>
