<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- SEO Meta Tags -->
    <title>免费翻墙软件 - 完全免费VPN代理服务 | 大翻墙运动</title>
    <meta
      name="description"
      content="提供完全免费的翻墙软件和VPN代理服务，支持V2Ray、Shadowsocks等多种协议。每日更新节点，支持安卓、iOS、Windows、Mac等全平台。突破网络封锁，畅享自由互联网。"
    />
    <meta
      name="keywords"
      content="免费翻墙,VPN代理,科学上网,V2Ray,Shadowsocks,翻墙软件,免费VPN,代理服务器,突破封锁,网络自由"
    />
    <meta name="robots" content="index, follow" />

    <!-- Structured Data for Website and Organization -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "免费翻墙软件 - 完全免费VPN代理服务",
        "url": "https://end-gfw.com",
        "description": "提供完全免费的翻墙软件和VPN代理服务，支持V2Ray、Shadowsocks等多种协议。每日更新节点，支持安卓、iOS、Windows、Mac等全平台。",
        "datePublished": "2024-01-01T00:00:00+08:00",
        "dateModified": "2025-08-07T00:00:00+08:00",
        "inLanguage": "zh-CN",
        "author": {
          "@type": "Organization",
          "name": "End GFW Together",
          "url": "https://end-gfw.com"
        },
        "publisher": {
          "@type": "Organization",
          "name": "End GFW Together",
          "url": "https://end-gfw.com"
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://end-gfw.com?search={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="免费翻墙软件 - 完全免费VPN代理服务" />
    <meta
      property="og:description"
      content="提供完全免费的翻墙软件和VPN代理服务，每日更新节点，支持全平台。"
    />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://end-gfw.com" />
    <meta property="og:image" content="images/default.png" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="免费翻墙软件 - 完全免费VPN代理服务" />
    <meta
      name="twitter:description"
      content="提供完全免费的翻墙软件和VPN代理服务，每日更新节点，支持全平台。"
    />
    <meta name="twitter:image" content="images/default.png" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://end-gfw.com" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/default.png" />
    <link rel="apple-touch-icon" href="images/default.png" />

    <!-- Tailwind CSS -->
    <script src="./tailwindcss.js"></script>
    <!-- <script src="./html2pdf.bundle.min.js"></script> -->

    <script
      src="./crypto-js.min.js"
      integrity="sha512-a+SUDuwNzXDvz4XrIcXHuCf089/iJAoN4lmrXJg18XnduKK6YlDHNRalv4yd1N40OKI80tFidF+rqTFKGPoWFQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script src="./hmac-sha1.min.js"></script>
    <script src="./js/qrcode.js"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            gridTemplateColumns: {
              14: 'repeat(14, minmax(0, 1fr))',
            },
            colors: {
              primary: {
                50: '#eff6ff',
                100: '#dbeafe',
                500: '#3b82f6',
                600: '#2563eb',
                700: '#1d4ed8',
              },
              accent: {
                500: '#10b981',
                600: '#059669',
              },
            },
            fontFamily: {
              sans: ['Inter', 'system-ui', 'sans-serif'],
            },
            animation: {
              'fade-in': 'fadeIn 0.5s ease-in-out',
              'slide-up': 'slideUp 0.3s ease-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              slideUp: {
                '0%': { transform: 'translateY(10px)', opacity: '0' },
                '100%': { transform: 'translateY(0)', opacity: '1' },
              },
            },
          },
        },
      };
    </script>

    <script>
      fetch('header.html')
        .then((response) => response.text())
        .then((text) => {
          document.getElementById('header').innerHTML = text;

          const mobileHeader = document.getElementById('mobile-header');
          const closeMenu = document.getElementById('close-menu');
          const openMenu = document.getElementById('open-menu');

          mobileHeader.classList.add('hidden');

          closeMenu.onclick = () => {
            mobileHeader.classList.add('hidden');
          };

          openMenu.onclick = () => {
            mobileHeader.classList.remove('hidden');
          };
        });

      fetch('footer.html')
        .then((response) => response.text())
        .then((text) => {
          document.getElementById('footer').innerHTML = text;

          const currentYearSpan = document.getElementById('currentYear');
          const currentDate = new Date();
          const currentYear = currentDate.getFullYear();
          currentYearSpan.textContent = currentYear;

          document.getElementById('year').value = currentYear;
        });
    </script>

    <script>
      const currentDomain = window.location.hostname;

      // Check the domain and conditionally add the script
      if (
        currentDomain === 'end-gfw.com' ||
        currentDomain === 'vpn.ban-gfw.com'
      ) {
        const script = document.createElement('script');
        script.src =
          'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7165471280882308'; // Replace with your script URL
        script.type = 'text/javascript';
        script.async = true;
        script.crossorigin = 'anonymous';

        // Append the script to the document head or body
        document.head.appendChild(script);
      }
    </script>
  </head>
  <body class="bg-gray-50 min-h-screen">
    <!-- Skip to main content for accessibility -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-primary-600 text-white px-4 py-2 rounded-md"
    >
      跳转到主要内容
    </a>

    <div id="header"></div>

    <main id="main-content" class="container mx-auto px-4 pt-20">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Left Column - VPN Links and Mirror Sites -->
        <div class="space-y-6">
          <!-- Enhanced Navigation Links Section -->
          <div class="bg-white rounded-xl shadow-lg p-6 animate-fade-in">
            <h2 class="text-xl font-bold text-gray-900 mb-4 flex items-center">
              <svg
                class="w-5 h-5 mr-2 text-primary-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              快速导航
            </h2>

            <!-- Mobile-first responsive grid -->
            <div
              class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2 gap-3"
            >
              <a
                href="./why.html"
                class="group flex items-center p-4 bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 border border-blue-200 rounded-lg transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5"
              >
                <div
                  class="flex-shrink-0 w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-5 h-5 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-sm font-semibold text-gray-900 group-hover:text-blue-700"
                  >
                    李老师推文
                  </h3>
                  <p class="text-xs text-gray-600 mt-0.5">最新国内新闻</p>
                </div>
                <svg
                  class="w-4 h-4 text-gray-400 group-hover:text-blue-600 transform group-hover:translate-x-1 transition-transform"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </a>

              <a
                href="./vpn.html"
                class="group flex items-center p-4 bg-gradient-to-r from-green-50 to-green-100 hover:from-green-100 hover:to-green-200 border border-green-200 rounded-lg transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5"
              >
                <div
                  class="flex-shrink-0 w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-5 h-5 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-sm font-semibold text-gray-900 group-hover:text-green-700"
                  >
                    下载翻墙软件
                  </h3>
                  <p class="text-xs text-gray-600 mt-0.5">
                    免费翻墙/代理/VPN工具
                  </p>
                </div>
                <svg
                  class="w-4 h-4 text-gray-400 group-hover:text-green-600 transform group-hover:translate-x-1 transition-transform"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </a>

              <a
                href="./events.html"
                class="group flex items-center p-4 bg-gradient-to-r from-orange-50 to-orange-100 hover:from-orange-100 hover:to-orange-200 border border-orange-200 rounded-lg transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5"
              >
                <div
                  class="flex-shrink-0 w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-5 h-5 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-sm font-semibold text-gray-900 group-hover:text-orange-700"
                  >
                    热点事件
                  </h3>
                  <p class="text-xs text-gray-600 mt-0.5">年度/月度热点追踪</p>
                </div>
                <svg
                  class="w-4 h-4 text-gray-400 group-hover:text-orange-600 transform group-hover:translate-x-1 transition-transform"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </a>

              <a
                href="./news.html"
                class="group flex items-center p-4 bg-gradient-to-r from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 border border-purple-200 rounded-lg transition-all duration-200 hover:shadow-md transform hover:-translate-y-0.5"
              >
                <div
                  class="flex-shrink-0 w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center mr-3"
                >
                  <svg
                    class="w-5 h-5 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03zM12.12 15.12A3 3 0 017 13s.879.5 2.5.5c0-1 .5-4 1.25-4.5.5 1 .786 1.293 1.371 1.879A2.99 2.99 0 0113 13a2.99 2.99 0 01-.879 2.121z"
                      clip-rule="evenodd"
                    ></path>
                  </svg>
                </div>
                <div class="flex-1 min-w-0">
                  <h3
                    class="text-sm font-semibold text-gray-900 group-hover:text-purple-700"
                  >
                    国际新闻
                  </h3>
                  <p class="text-xs text-gray-600 mt-0.5">全球资讯速览</p>
                </div>
                <svg
                  class="w-4 h-4 text-gray-400 group-hover:text-purple-600 transform group-hover:translate-x-1 transition-transform"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fill-rule="evenodd"
                    d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                    clip-rule="evenodd"
                  ></path>
                </svg>
              </a>
            </div>
          </div>

          <!-- VPN Subscription Links -->
          <section
            id="vpn-links"
            class="bg-white rounded-xl shadow-lg p-6 animate-fade-in"
          >
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
              <svg
                class="w-6 h-6 mr-2 text-primary-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              订阅链接
            </h2>

            <div class="space-y-4">
              <div class="p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">V2Ray订阅链接</h3>
                <button
                  onclick="copyText('v2ray')"
                  class="w-full text-left p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <span class="text-sm text-gray-600 break-all" id="v2ray">
                    https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together
                  </span>
                </button>
              </div>

              <div class="p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">Clash订阅链接</h3>
                <button
                  onclick="copyText('clash')"
                  class="w-full text-left p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <span class="text-sm text-gray-600 break-all" id="clash">
                    https://raw.githubusercontent.com/hello-world-1989/cn-news/refs/heads/main/clash.yaml
                  </span>
                </button>
              </div>

              <div>
                <div class="inline-block">
                  <img
                    class="w-40 h-40 inline-block"
                    src="./images/v2ray_sub.png"
                    alt="V2Ray订阅链接"
                  />
                  <p class="pl-5">V2Ray订阅链接</p>
                </div>
                <div class="inline-block">
                  <img
                    class="w-40 h-40 inline-block"
                    src="./images/clash_sub.png"
                    alt="Clash订阅链接"
                  />
                  <p class="pl-5">Clash订阅链接</p>
                </div>
              </div>

              <div class="p-4 bg-gray-50 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">邮件获取SS密钥</h3>
                <p
                  onclick="copyText('email')"
                  class="w-full text-left p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <span class="text-sm text-gray-600 break-all">
                    如果是第一次翻墙， 发送邮件到<span id="email">end.gfw01@gmail.com</span>,
                    欢迎分享给身边朋友
                  </span>

                </p>

                <p
                  onclick="copyText('email1')"
                  class="w-full text-left p-3 bg-white border rounded-lg hover:bg-gray-50 transition-colors"
                >
                <span class="text-sm text-gray-600 break-all">
                    免费获取10M/s订阅链接（需3天签到一次，并反馈使用效果）, 请发送邮件到 <span id="email1">end.gfw@hotmail.com</span>
                  </span>
              </p>
              </div>
            </div>
          </section>

          <!-- Apple Account Section -->
          <!-- <section class="bg-white rounded-xl shadow-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
              <svg class="w-6 h-6 mr-2 text-primary-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 8a6 6 0 01-7.743 5.743L10 14l-0.257-0.257A6 6 0 1118 8zM2 8a6 6 0 1012 0A6 6 0 002 8z" clip-rule="evenodd"></path>
              </svg>
              海外Apple账户
            </h2>
            
            <div class="space-y-3">
              <button onclick="copyText('apple-id')" id="apple-account" class="w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                <div class="text-sm text-gray-600">用户名 (点击复制)</div>
                <span class="font-mono text-sm" id="apple-id"></span>
              </button>
              
              <button onclick="copyText('apple-password')" class="w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
                <div class="text-sm text-gray-600">
                  过期时间: <span id="apple-expiry"></span> | 密码 (点击复制)
                </div>
                <span class="font-mono text-sm" id="apple-password">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/refs/heads/main/clash.yaml
                </span>
              </button>
            </div>
          </section> -->

          <!-- Sponsorship Section -->
          <section
            class="bg-gradient-to-r from-accent-500 to-accent-600 text-white rounded-xl shadow-lg p-6 animate-fade-in"
          >
            <h2 class="text-xl font-bold mb-4">支持我们</h2>
            <p class="mb-4 opacity-90">
              一次性赞助任意金额(USD
              2-5)，长期获得(20-50M/s,至少3个月，最长1年)更快速度更加稳定更多线路
            </p>
            <a
              href="./custom.html"
              target="_blank"
              class="inline-block bg-white text-accent-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors"
            >
              欢迎赞助/合作/推广
            </a>
          </section>

          <!-- Mirror Sites -->
          <section class="bg-white rounded-xl shadow-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">镜像站点</h2>
            <div id="mirror-list" class="space-y-2"></div>
          </section>
        </div>

        <!-- Right Column - Software Downloads and Search -->
        <div class="space-y-6">
          <!-- Software Download Section -->
          <section
            id="download-section"
            class="bg-white rounded-xl shadow-lg p-6 animate-fade-in"
          >
            <h2 class="text-2xl font-bold text-gray-900 mb-6 flex items-center">
              <svg
                class="w-6 h-6 mr-2 text-primary-600"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                ></path>
              </svg>
              翻墙软件推荐
            </h2>

            <div class="space-y-4">
              <div class="p-4 border border-gray-200 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">🤖 安卓手机</h3>
                <p class="text-gray-600 mb-3">
                  使用Outline、V2Ray、Clash、NthLink
                </p>
                <a
                  href="./vpn.html"
                  class="text-primary-600 hover:text-primary-700 font-semibold"
                  >下载链接 →</a
                >
              </div>

              <div class="p-4 border border-gray-200 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">🍎 苹果设备</h3>
                <p class="text-gray-600 mb-3">
                  使用海外苹果账户下载Outline、V2Ray、Clash、NthLink
                </p>
                <a
                  href="./qa.html#apple-account"
                  class="text-primary-600 hover:text-primary-700 font-semibold"
                  >获取账户 →</a
                >
              </div>

              <div class="p-4 border border-gray-200 rounded-lg">
                <h3 class="font-semibold text-gray-900 mb-2">💻 Windows电脑</h3>
                <p class="text-gray-600 mb-3">
                  使用Outline、V2Ray、Clash、NthLink
                </p>
                <a
                  href="./vpn.html"
                  class="text-primary-600 hover:text-primary-700 font-semibold"
                  >下载链接 →</a
                >
              </div>
            </div>
          </section>

          <!-- SS Keys Section -->
          <section class="bg-white rounded-xl shadow-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">SS密钥, <a href="./nodes.html" class="text-indigo-600">点击获得更多密钥(包含第三方密钥)</a></h2>
            <p class="text-gray-600 mb-4">
              点击下方链接复制，导入到Outline/V2Ray
            </p>

            <div id="outline" class="space-y-3">
              <p
                class="cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
                onclick="copyText('outline1')"
              >
                <span id="outline1" class="text-sm font-mono break-all">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together-ss
                </span>
              </p>

              <p
                class="cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
                onclick="copyText('outline2')"
              >
                <span id="outline2" class="text-sm font-mono break-all">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together-ss
                </span>
              </p>

              <p
                class="cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors hidden"
                onclick="copyText('outline3')"
              >
                <span id="outline3" class="text-sm font-mono break-all">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together-ss
                </span>
              </p>

              <p
                class="cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors hidden"
                onclick="copyText('outline4')"
              >
                <span id="outline4" class="text-sm font-mono break-all">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together-ss
                </span>
              </p>

              <p
                class="cursor-pointer p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors hidden"
                onclick="copyText('outline5')"
              >
                <span id="outline5" class="text-sm font-mono break-all">
                  https://raw.githubusercontent.com/hello-world-1989/cn-news/main/end-gfw-together-ss
                </span>
              </p>

              <p
                class="cursor-pointer p-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
              >
              <span class="lg:hidden">手机截图保存图片</span>
              <span class="hidden lg:flex">右键保存图片</span>
                <span
                  id="qrcode1"
                  class="text-sm font-mono inline-block hidden"
                >
                </span>
                <span
                  id="qrcode2"
                  class="text-sm font-mono inline-block lg:pl-10 pt-5 lg:pt-0 hidden"
                >
                </span>
                <span
                  id="qrcode3"
                  class="text-sm font-mono inline-block lg:pl-10 pt-5 lg:pt-0 hidden"
                >
                </span>
              </p>
            </div>
          </section>

          <!-- Check-in Section -->
          <section class="bg-white rounded-xl shadow-lg p-6 animate-fade-in">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">用户签到</h2>
            <div class="flex flex-col sm:flex-row gap-3">
              <div class="flex-1">
                <input
                  type="text"
                  name="token"
                  id="token"
                  placeholder="输入你的ID"
                  class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                />
              </div>
              <button
                type="submit"
                onclick="renewPlan()"
                class="px-6 py-3 bg-primary-600 text-white rounded-lg font-semibold hover:bg-primary-700 focus:ring-2 focus:ring-primary-500 transition-colors"
              >
                签到
              </button>
            </div>
            <span id="token-status" class="mt-3 hidden text-sm"></span>
          </section>
        </div>
      </div>
    </main>

    <div id="footer"></div>
    <div id="content"></div>

    <!-- Notification for copy success -->
    <div
      id="copy-notification"
      class="fixed bottom-32 right-4 md:bottom-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform translate-y-full transition-transform hidden z-50"
    >
      复制成功！
    </div>

    <script>
      async function renewPlan() {
        const tokenElement = document.getElementById('token');
        const tokenStatusElement = document.getElementById('token-status');
        // const tokenErrorElement = document.getElementById('token-error');

        const token = tokenElement.value;

        console.log('token: ', token);

        if (!token) {
          return;
        }

        tokenStatusElement.classList.remove('hidden');

        tokenStatusElement.textContent = '签到中...';

        let temp = [];

        try {
          await fetch(`/renew-plan?token=${token}`);
          tokenStatusElement.textContent = '签到成功!';
        } catch (err) {
          tokenStatusElement.textContent = '签到失败!';
          console.error('error token renew', token);
        }
      }
    </script>

    <script>
      async function getSS() {
        const res = await fetch('/ss-key');

        const ssKeyBase64 = await res.text();

        const ssKeys = ssKeyBase64?.split('\r\n');

        //const ssKey1 = ssKeys?.[0];
        //const ssKey2 = ssKeys?.[1];

        ssKeys.forEach((key, i) => {
          const element = document.getElementById(`outline${i + 1}`);
          element.parentElement.classList.remove('hidden');
          element.innerText = key;

          const qrCodeElement = document.getElementById(`qrcode${i + 1}`);
          qrCodeElement.classList.remove('hidden');

          new QRCode(qrCodeElement, {
            text: key,
            width: 150,
            height: 150,
          });
        });

        try {
          // Extract IP and port from Shadowsocks keys
          const dataArr = ssKeys
            .filter((key) => !key.includes('@us'))
            .map((ssKey) => {
              try {
                // Parse ss:// format: ss://base64@ip:port#comment
                const match = ssKey.match(/ss:\/\/[^@]+@([^:]+):(\d+)/);
                if (match) {
                  return {
                    ip: match[1],
                    port: parseInt(match[2], 10),
                  };
                }
                return null;
              } catch (error) {
                console.error('Error parsing SS key:', ssKey, error);
                return null;
              }
            })
            .filter(Boolean); // Remove null entries

          const whyElement = document.getElementById('mirror-list');

          if (!whyElement) {
            console.error('Mirror list element not found');
            return;
          }

          // Clear existing content
          whyElement.innerHTML = '';

          if (!dataArr || dataArr.length === 0) {
            whyElement.innerHTML = `
                <div class="text-center p-4 text-gray-500">
                  <svg class="w-8 h-8 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                  </svg>
                  暂无可用镜像站点
                </div>
              `;
            return;
          }

          dataArr.forEach((item) => {
            const linkContainer = document.createElement('div');
            linkContainer.className =
              'flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors mb-2';

            const linkElement = document.createElement('a');
            linkElement.className =
              'text-primary-600 hover:text-primary-700 font-medium break-all';
            linkElement.target = '_blank';

            if (item.port == 80) {
              linkElement.href = `http://${item.ip}`;
              linkElement.innerText = `http://${item.ip}`;
            } else {
              linkElement.href = `http://${item.ip}:8081/`;
              linkElement.innerText = `http://${item.ip}:8081/`;
            }

            const statusIndicator = document.createElement('div');
            statusIndicator.className =
              'flex items-center text-sm text-gray-600 flex-shrink-0 ml-2';
            statusIndicator.innerHTML = `
                <div class="w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"></div>
                可用
              `;

            linkContainer.appendChild(linkElement);
            linkContainer.appendChild(statusIndicator);
            whyElement.appendChild(linkContainer);
          });
        } catch (error) {
          console.error('Error fetching mirror hosts:', error);
          const whyElement = document.getElementById('mirror-list');
          if (whyElement) {
            whyElement.innerHTML = `
                <div class="text-center p-4 text-red-500">
                  <svg class="w-8 h-8 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                  </svg>
                  加载镜像站点失败
                </div>
              `;
          }
        }
      }

      // Call when DOM is ready
      document.addEventListener('DOMContentLoaded', function () {
        getSS();
      });
    </script>

    <!-- <script>
      async function getCurrentMirrorStatus() {
        const res = await fetch('/check-status');

        const currentMirrorStatus = await res.text();

        const currentMirrorElement = document.getElementById('current-mirror');

        currentMirrorElement.innerText =
          currentMirrorStatus == 'true'
            ? '当前镜像节点状态正常'
            : '当前镜像节点被屏蔽， 请更换IP';
      }

      getCurrentMirrorStatus();
    </script> -->

    <script>
      function copyText(elementId) {
        // Get the text field
        var textToCopy = document.getElementById(elementId);

        // Select the text
        var range = document.createRange();
        range.selectNode(textToCopy);
        window.getSelection().removeAllRanges(); // clear current selection
        window.getSelection().addRange(range); // to select text

        try {
          // Now that we've selected the text, execute the copy command
          var successful = document.execCommand('copy');
          if (successful) {
            showCopyNotification();
          }
          console.log(
            'Copy text command was ' +
              (successful ? 'successful' : 'unsuccessful')
          );
        } catch (err) {
          console.log('Oops, unable to copy', err);
        }

        // Remove the selections - NOTE: Might not be necessary in some cases
        window.getSelection().removeAllRanges();
      }

      function showCopyNotification() {
        const notification = document.getElementById('copy-notification');
        notification.classList.remove('hidden', 'translate-y-full');
        notification.classList.add('translate-y-0');

        setTimeout(() => {
          notification.classList.remove('translate-y-0');
          notification.classList.add('translate-y-full');
          setTimeout(() => {
            notification.classList.add('hidden');
          }, 300);
        }, 2000);
      }
    </script>

    <script>
      function copyTweet(elementId) {
        // Get the text field
        const linkElement = document.getElementById(elementId);

        // Create a temporary input element to hold the link text
        var tempInput = document.createElement('input');
        tempInput.value = linkElement.href;
        document.body.appendChild(tempInput);

        tempInput.select();
        tempInput.setSelectionRange(0, 99999);

        try {
          // Now that we've selected the text, execute the copy command
          var successful = document.execCommand('copy');
          if (successful) {
            showCopyNotification();
          }
          var msg = successful ? 'successful' : 'unsuccessful';
          console.log('Copy text command was ' + msg);
        } catch (err) {
          console.log('Oops, unable to copy', err);
        }

        // Remove the selections - NOTE: Might not be necessary in some cases
        document.body.removeChild(tempInput);
      }
    </script>

    <script>
      const getWeekNumber = () => {
        const date = new Date();
        const firstDayOfYear = new Date(date.getFullYear(), 0, 1);
        const pastDaysOfYear =
          (date.getTime() - firstDayOfYear.getTime()) / 86400000; // Milliseconds per day
        //return Math.ceil((pastDaysOfYear + 1) / 7);
        return Math.ceil(pastDaysOfYear / 3);
      };

      const hashWeek = () => {
        const weekNumber = getWeekNumber();
        const hash = CryptoJS.SHA1(weekNumber + '').toString();

        return hash.slice(0, 6);
      };
    </script>
  </body>
</html>
